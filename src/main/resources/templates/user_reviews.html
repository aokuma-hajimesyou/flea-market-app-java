<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>自分の評価 - FleaMarketApp</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header class="app-header">
        <div class="header-inner">
            <h1 class="app-title"><a th:href="@{/items}">FleaMarketApp</a></h1>
        </div>
    </header>

    <div class="container">
        <h1>自分の評価</h1>

        <section class="review-section">
            <h2><i class="fas fa-user-tag"></i> あなたへの評価</h2>
            <p style="font-size: 0.85rem; color: var(--text-sub); margin-bottom: 10px;">出品者として購入者から受け取った評価です。</p>
            
            <div class="review-list">
                <div th:each="review : ${reviewsForMe}" class="review-item">
                    <div class="review-header">
                        <span class="review-user">
                            <i class="fas fa-user-circle"></i> <span th:text="${review.reviewer.name}"></span> さん
                        </span>
                        <span class="review-date" th:text="${#temporals.format(review.createdAt, 'yyyy/MM/dd')}"></span>
                    </div>
                    
                    <span class="review-item-name" th:text="'商品: ' + ${review.item.name}"></span>
                    
                    <div class="star-rating">
                        <span th:each="i : ${#numbers.sequence(1, 5)}">
                            <i th:class="${i <= review.rating ? 'fas fa-star' : 'far fa-star'}"></i>
                        </span>
                    </div>
                    
                    <div class="review-comment" th:text="${review.comment}"></div>
                </div>
                
                <div th:if="${#lists.isEmpty(reviewsForMe)}" class="empty-state">
                    まだ評価を受け取っていません。
                </div>
            </div>
        </section>

        <section class="review-section">
            <h2><i class="fas fa-paper-plane"></i> 送信した評価</h2>
            <p style="font-size: 0.85rem; color: var(--text-sub); margin-bottom: 10px;">購入者として出品者に送った評価です。</p>
            
            <div class="review-list">
                <div th:each="review : ${myReviews}" class="review-item">
                    <div class="review-header">
                        <span class="review-user">
                            相手: <span th:text="${review.seller.name}"></span> さん
                        </span>
                        <span class="review-date" th:text="${#temporals.format(review.createdAt, 'yyyy/MM/dd')}"></span>
                    </div>

                    <span class="review-item-name" th:text="'商品: ' + ${review.item.name}"></span>

                    <div class="star-rating">
                        <span th:each="i : ${#numbers.sequence(1, 5)}">
                            <i th:class="${i <= review.rating ? 'fas fa-star' : 'far fa-star'}"></i>
                        </span>
                    </div>

                    <div class="review-comment" th:text="${review.comment}"></div>
                </div>

                <div th:if="${#lists.isEmpty(myReviews)}" class="empty-state">
                    まだ評価を送信していません。
                </div>
            </div>
        </section>

        <div class="button-group">
            <a th:href="@{/my-page}" class="button secondary" style="width: 100%;">
                <i class="fas fa-chevron-left"></i> マイページに戻る
            </a>
        </div>
    </div>

    <div style="height: 40px;"></div>
</body>
</html>