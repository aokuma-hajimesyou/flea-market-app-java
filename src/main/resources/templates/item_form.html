<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title th:text="${item.id == null ? '商品出品' : '商品編集'}"></title>
	<link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
	<div class="container">
		<h1 th:text="${item.id == null ? '商品出品' : '商品編集'}"></h1>
		<div th:if="${errorMessage}" class="error-message" th:text="${errorMessage}"></div>

		<form th:action="${item.id == null ? '/items' : '/items/' + item.id}" method="post"
			enctype="multipart/form-data">
			<input type="hidden" th:if="${item.id != null}" name="_method" value="put">

			<p>
				<label for="name">商品名:</label>
				<input type="text" id="name" name="name" th:value="${item.name}" required>
			</p>

			<p>
				<label for="description">商品説明:</label>
				<textarea id="description" name="description" th:text="${item.description}"></textarea>
			</p>

			<p>
				<label for="price">価格 (¥):</label>
				<input type="number" id="price" name="price" th:value="${item.price}" step="0.01" required>
			</p>

			<p>
				<label for="categoryId">カテゴリ:</label>
				<select id="categoryId" name="categoryId" required>
					<option value="">選択してください</option>
					<option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.name}"
						th:selected="${item.category != null and item.category.id == category.id}"></option>
				</select>
			</p>

			<p>
				<label for="image">商品画像:</label>
				<input type="file" id="image" name="image" accept="image/*">
				<span th:if="${item.imageUrl}">現在の画像: <img th:src="${item.imageUrl}"
						style="width: 100px; height: auto;"></span>
			</p>

			<div class="button-group">
				<button type="submit" th:text="${item.id == null ? '出品する' : '更新する'}"></button>
				<a th:href="@{/items}" class="button secondary">キャンセル</a>
			</div>
		</form>
	</div>
</body>

</html>